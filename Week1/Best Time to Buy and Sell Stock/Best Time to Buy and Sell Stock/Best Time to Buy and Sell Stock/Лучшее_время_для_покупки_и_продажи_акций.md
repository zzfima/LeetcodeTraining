
# LeetCode 121: Лучшее время для покупки и продажи акций

## Условие задачи

Вам дан массив `prices`, где `prices[i]` — это цена акции в `i`-й день.  
Вам нужно найти максимальную прибыль, которую можно получить, выбрав один день для покупки и другой день для продажи акций.  
Если невозможно получить прибыль, верните `0`.

### Пример:
#### Ввод:
```
prices = [7, 1, 5, 3, 6, 4]
```
#### Вывод:
```
5
```
#### Объяснение:
Купить во 2-й день (цена = 1) и продать в 5-й день (цена = 6), прибыль = 6 - 1 = 5.

---

## Ограничения:
- `1 ≤ prices.length ≤ 10⁵`
- `0 ≤ prices[i] ≤ 10⁴`

---

## Подход к решению

Мы будем проходить по массиву и отслеживать:
1. **Минимальную цену**, встреченную до текущего дня (`minPrice`).
2. **Максимальную прибыль**, рассчитанную до текущего дня (`maxProfit`).

На каждом шаге:
- Если текущая цена меньше `minPrice`, обновляем `minPrice`.
- В противном случае рассчитываем прибыль от продажи по текущей цене и обновляем `maxProfit`, если она больше текущего значения.

### Алгоритм:
1. Инициализируем `minPrice` очень большим значением (`int.MaxValue`).
2. Инициализируем `maxProfit` значением `0`.
3. Проходим по массиву:
   - Обновляем `minPrice`, если текущая цена меньше.
   - Обновляем `maxProfit`, если продажа по текущей цене даёт большую прибыль.
4. Возвращаем `maxProfit`.

---

## Реализация на C#

```csharp
using System;

class Solution
{
    public int MaxProfit(int[] prices)
    {
        // Инициализация минимальной цены и максимальной прибыли
        int minPrice = int.MaxValue;
        int maxProfit = 0;

        foreach (int price in prices)
        {
            // Обновляем минимальную цену, если находим меньшую
            if (price < minPrice)
            {
                minPrice = price;
            }
            else
            {
                // Вычисляем текущую прибыль и обновляем maxProfit, если это выгодно
                int profit = price - minPrice;
                if (profit > maxProfit)
                {
                    maxProfit = profit;
                }
            }
        }

        return maxProfit;
    }
}

// Пример использования
class Program
{
    static void Main()
    {
        Solution solution = new Solution();
        int[] prices = { 7, 1, 5, 3, 6, 4 };
        Console.WriteLine("Максимальная прибыль: " + solution.MaxProfit(prices)); // Ожидается: 5
    }
}
```

---

## Объяснение работы кода
1. **`minPrice`**:
   - Хранит минимальную цену акций, встреченную до текущего дня.
   - Например, для `prices = [7, 1, 5, 3, 6, 4]`, `minPrice` обновляется следующим образом: 7 → 1.
   
2. **`maxProfit`**:
   - Сохраняет максимальную прибыль, найденную до текущего момента.
   - В том же примере прибыль обновляется до 4, затем до 5.

3. **Сложность**:
   - **Время**: O(n), где `n` — длина массива. Мы проходим массив только один раз.
   - **Память**: O(1), так как используем только несколько переменных.

---

## Дополнительные тестовые случаи

### Тест 1:
#### Ввод:
```
prices = [7, 6, 4, 3, 1]
```
#### Вывод:
```
0
```
#### Объяснение:
Невозможно получить прибыль.

### Тест 2:
#### Ввод:
```
prices = [2, 4, 1]
```
#### Вывод:
```
2
```
#### Объяснение:
Купить в 1-й день (цена = 2) и продать во 2-й день (цена = 4), прибыль = 4 - 2 = 2.

---

## Итог

Этот подход эффективно рассчитывает максимальную прибыль за один проход массива, используя постоянный объём памяти. Он оптимален и подходит для заданных ограничений.
